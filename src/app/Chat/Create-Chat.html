<div class="create-chat-container">
  <h2>Neuen Chat erstellen</h2>
  <div *ngIf="loadingProfiles">Profile werden geladen...</div>

  <div *ngIf="error" class="error-msg">
    {{ error }}
  </div>

  <div *ngIf="success" class="success-msg">
    {{ success }}
  </div>

  <form *ngIf="!loadingProfiles" (ngSubmit)="createChat()" class="create-chat-form">
    <div class="form-container">
      <input
        [(ngModel)]="chatName"
        name="chatName"
        placeholder="Chat-Name eingeben"
        class="chat-name-input"
        id="chatName"
        type="text"
      />
    </div>

    <div class="form-container">
      <h3>Teilnehmer auswÃ¤hlen</h3>

      <div *ngIf="profiles.length === 0" class="no-users">Keine Nutzer gefunden.</div>

      <div *ngFor="let user of profiles" class="user-item">
        <label>
          <input
            type="checkbox"
            [checked]="selectedUserHash.includes(user.hash)"
            (change)="toggleUser(user.hash)"
          />
          {{ user.nickname }}
        </label>
      </div>
    </div>

    <button
      type="submit"
      [disabled]="submitting || !chatName.trim() || selectedUserHash.length === 0"
    >
      {{ submitting ? 'Wird erstellt...' : 'Chat starten' }}
    </button>
  </form>
</div>
